<div class="agenda-container">
  <h2>ðŸ“… Mes Agendas</h2>

  <!-- SÃ©lecteur de semaine -->
  <div class="week-selector">
    <button (click)="prevWeek()">&lt;</button>
    <span>
      {{ currentMonday | myLocalDate }} â†’ {{ currentSunday | myLocalDate }}
    </span>
    <button (click)="nextWeek()">&gt;</button>
  </div>

  <!-- Grille agenda -->
  <div class="agenda-grid">
  <!-- Header vide pour coin supÃ©rieur gauche -->
  <div class="grid-header"></div>

  <!-- Headers des jours -->
  <div class="day-header" *ngFor="let day of weekDays">
    <span class="day-name">
      {{ formatDayHeader(day) }}
    </span>
    <span class="day-number">
      {{ day.getDate() }}
    </span>
  </div>

  <!-- Labels des heures -->
  <div class="time-label" *ngFor="let hour of hours">
    {{ hour }}
  </div>

  <!-- Slots horaires -->
  <ng-container *ngFor="let day of weekDays; let dayIndex = index">
    <ng-container *ngFor="let hour of hours; let hourIndex = index">
      <div
        class="time-slot"
        [style.grid-column]="dayIndex + 2"
        [style.grid-row]="hourIndex + 2"
      >
        <ng-container *ngFor="let event of agendas">
          <div class="event" *ngIf="isEventInSlot(event, day, hourIndex)">
            {{ event.title }}
          </div>
        </ng-container>
      </div>
    </ng-container>
  </ng-container>
</div>


  <!-- Bouton ajouter -->
  <button mat-fab color="primary" class="fab-button" (click)="onAdd()">
    <mat-icon>add</mat-icon>
  </button>
</div>

<app-agenda-edition (submitForm)="handleUserSubmit($event)"></app-agenda-edition>
